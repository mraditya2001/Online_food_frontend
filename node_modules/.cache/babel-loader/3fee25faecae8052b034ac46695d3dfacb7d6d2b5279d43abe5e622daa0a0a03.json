{"ast":null,"code":"import { ADD_TO_FAVORITES_FAILURE, ADD_TO_FAVORITES_REQUEST, ADD_TO_FAVORITES_SUCCESS, GET_USER_FAILURE, GET_USER_REQUEST, GET_USER_SUCCESS, LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT, REGISTER_FAILURE, REGISTER_REQUEST, REGISTER_SUCCESS, REQUEST_RESET_PASSWORD_FAILURE, REQUEST_RESET_PASSWORD_REQUEST, REQUEST_RESET_PASSWORD_SUCCESS } from \"./ActionType\";\nimport { API_URL, api } from \"../../config/api\";\nimport axios from \"axios\";\nexport const registerUser = reqData => async dispatch => {\n  console.log(\"resgister request data \", reqData.userData);\n  try {\n    dispatch({\n      type: REGISTER_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/signup`, reqData.userData);\n    if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\n    if (data.role === \"ROLE_RESTAURANT_OWNER\") {\n      reqData.navigate(\"/admin/restaurant\");\n    } else {\n      reqData.navigate(\"/\");\n    }\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: data.jwt\n    });\n  } catch (error) {\n    console.log(\"catch error ------ \", error);\n    dispatch({\n      type: REGISTER_FAILURE,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const loginUser = reqData => async dispatch => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/signin`, reqData.data);\n    if (data.jwt) localStorage.setItem(\"jwt\", data.jwt);\n    if (data.role === \"ROLE_RESTAURANT_OWNER\") {\n      reqData.navigate(\"/admin/restaurant\");\n    } else {\n      reqData.navigate(\"/\");\n    }\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data.jwt\n    });\n  } catch (error) {\n    dispatch({\n      type: LOGIN_FAILURE,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const getUser = token => {\n  return async dispatch => {\n    dispatch({\n      type: GET_USER_REQUEST\n    });\n    try {\n      const response = await api.get(`/api/users/profile`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const user = response.data;\n      dispatch({\n        type: GET_USER_SUCCESS,\n        payload: user\n      });\n      console.log(\"req User \", user);\n    } catch (error) {\n      const errorMessage = error.message;\n      dispatch({\n        type: GET_USER_FAILURE,\n        payload: errorMessage\n      });\n    }\n  };\n};\nexport const addToFavorites = ({\n  restaurantId,\n  jwt\n}) => {\n  return async dispatch => {\n    dispatch({\n      type: ADD_TO_FAVORITES_REQUEST\n    });\n    try {\n      const {\n        data\n      } = await api.put(`api/restaurants/${restaurantId}/add-favorites`, {}, {\n        headers: {\n          Authorization: `Bearer ${jwt}`\n        }\n      });\n      console.log(\"Add to favorites \", data);\n      dispatch({\n        type: ADD_TO_FAVORITES_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      console.log(\"catch error \", error);\n      dispatch({\n        type: ADD_TO_FAVORITES_FAILURE,\n        payload: error.message\n      });\n    }\n  };\n};\nexport const resetPasswordRequest = email => async dispatch => {\n  dispatch({\n    type: REQUEST_RESET_PASSWORD_REQUEST\n  });\n  try {\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/reset-password-request?email=${email}`, {});\n    console.log(\"reset password -: \", data);\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(\"error \", error);\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const resetPassword = reqData => async dispatch => {\n  dispatch({\n    type: REQUEST_RESET_PASSWORD_REQUEST\n  });\n  try {\n    const {\n      data\n    } = await axios.post(`${API_URL}/auth/reset-password`, reqData.data);\n    console.log(\"reset password -: \", data);\n    reqData.navigate(\"/password-change-success\");\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(\"error \", error);\n    dispatch({\n      type: REQUEST_RESET_PASSWORD_FAILURE,\n      payload: error.message\n    });\n  }\n};\nexport const logout = () => {\n  return async dispatch => {\n    dispatch({\n      type: LOGOUT\n    });\n    localStorage.clear();\n  };\n};","map":{"version":3,"names":["ADD_TO_FAVORITES_FAILURE","ADD_TO_FAVORITES_REQUEST","ADD_TO_FAVORITES_SUCCESS","GET_USER_FAILURE","GET_USER_REQUEST","GET_USER_SUCCESS","LOGIN_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGOUT","REGISTER_FAILURE","REGISTER_REQUEST","REGISTER_SUCCESS","REQUEST_RESET_PASSWORD_FAILURE","REQUEST_RESET_PASSWORD_REQUEST","REQUEST_RESET_PASSWORD_SUCCESS","API_URL","api","axios","registerUser","reqData","dispatch","console","log","userData","type","data","post","jwt","localStorage","setItem","role","navigate","payload","error","response","message","loginUser","getUser","token","get","headers","Authorization","user","errorMessage","addToFavorites","restaurantId","put","resetPasswordRequest","email","resetPassword","logout","clear"],"sources":["D:/public/Downloads/food-ordering-project-2024-02-07-03-39-35/Source/frontend-react/src/State/Authentication/Action.js"],"sourcesContent":["import {\r\n  ADD_TO_FAVORITES_FAILURE,\r\n  ADD_TO_FAVORITES_REQUEST,\r\n  ADD_TO_FAVORITES_SUCCESS,\r\n  GET_USER_FAILURE,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGOUT,\r\n  REGISTER_FAILURE,\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  REQUEST_RESET_PASSWORD_FAILURE,\r\n  REQUEST_RESET_PASSWORD_REQUEST,\r\n  REQUEST_RESET_PASSWORD_SUCCESS,\r\n} from \"./ActionType\";\r\nimport { API_URL, api } from \"../../config/api\";\r\nimport axios from \"axios\";\r\n\r\nexport const registerUser = (reqData) => async (dispatch) => {\r\n  console.log(\"resgister request data \",reqData.userData)\r\n  try {\r\n    dispatch({ type: REGISTER_REQUEST });\r\n\r\n    const { data } = await axios.post(`${API_URL}/auth/signup`, reqData.userData);\r\n    if(data.jwt) localStorage.setItem(\"jwt\",data.jwt)\r\n    if(data.role===\"ROLE_RESTAURANT_OWNER\"){\r\n      reqData.navigate(\"/admin/restaurant\")\r\n    }\r\n    else{\r\n      reqData.navigate(\"/\")\r\n    }\r\n    dispatch({ type: REGISTER_SUCCESS, payload: data.jwt });\r\n  } catch (error) {\r\n    console.log(\"catch error ------ \",error)\r\n    dispatch({\r\n      type: REGISTER_FAILURE,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const loginUser = (reqData) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: LOGIN_REQUEST });\r\n\r\n    const { data } = await axios.post(`${API_URL}/auth/signin`, reqData.data);\r\n    if(data.jwt) localStorage.setItem(\"jwt\",data.jwt)\r\n    if(data.role===\"ROLE_RESTAURANT_OWNER\"){\r\n      reqData.navigate(\"/admin/restaurant\")\r\n    }\r\n    else{\r\n      reqData.navigate(\"/\")\r\n    }\r\n    \r\n    dispatch({ type: LOGIN_SUCCESS, payload: data.jwt });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: LOGIN_FAILURE,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const getUser = (token) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: GET_USER_REQUEST });\r\n    try {\r\n      const response = await api.get(`/api/users/profile`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      const user = response.data;\r\n      \r\n      dispatch({ type: GET_USER_SUCCESS, payload: user });\r\n      console.log(\"req User \", user);\r\n    } catch (error) {\r\n      const errorMessage = error.message;\r\n      dispatch({ type: GET_USER_FAILURE, payload: errorMessage });\r\n    }\r\n  };\r\n};\r\n\r\nexport const addToFavorites = ({restaurantId,jwt}) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: ADD_TO_FAVORITES_REQUEST });\r\n    try {\r\n      const { data } = await api.put(`api/restaurants/${restaurantId}/add-favorites`,{},{\r\n        headers: {\r\n          Authorization: `Bearer ${jwt}`,\r\n        },\r\n      });\r\n      console.log(\"Add to favorites \",data)\r\n      dispatch({ type: ADD_TO_FAVORITES_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      console.log(\"catch error \",error)\r\n      dispatch({\r\n        type: ADD_TO_FAVORITES_FAILURE,\r\n        payload: error.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const resetPasswordRequest = (email) => async (dispatch) => {\r\n  dispatch({type:REQUEST_RESET_PASSWORD_REQUEST});\r\n  try {\r\n    const {data} = await axios.post(`${API_URL}/auth/reset-password-request?email=${email}`,{});\r\n    \r\n    console.log(\"reset password -: \", data);\r\n   \r\n    dispatch({type:REQUEST_RESET_PASSWORD_SUCCESS,payload:data});\r\n  } catch (error) {\r\n    console.log(\"error \",error)\r\n    dispatch({type:REQUEST_RESET_PASSWORD_FAILURE,payload:error.message});\r\n  }\r\n};\r\n\r\nexport const resetPassword = (reqData) => async (dispatch) => {\r\n  dispatch({type:REQUEST_RESET_PASSWORD_REQUEST});\r\n  try {\r\n    const {data} = await axios.post(`${API_URL}/auth/reset-password`,reqData.data);\r\n    \r\n    console.log(\"reset password -: \", data);\r\n\r\n    reqData.navigate(\"/password-change-success\")\r\n   \r\n    dispatch({type:REQUEST_RESET_PASSWORD_SUCCESS,payload:data});\r\n  } catch (error) {\r\n    console.log(\"error \",error)\r\n    dispatch({type:REQUEST_RESET_PASSWORD_FAILURE,payload:error.message});\r\n  }\r\n};\r\n\r\nexport const logout = () => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: LOGOUT });\r\n    localStorage.clear();\r\n  };\r\n};\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}