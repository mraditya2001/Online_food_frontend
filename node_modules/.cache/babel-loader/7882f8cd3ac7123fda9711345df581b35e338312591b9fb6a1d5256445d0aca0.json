{"ast":null,"code":"import { isPresentInFavorites } from \"../../config/logic\";\nimport { REGISTER_REQUEST, REGISTER_SUCCESS, REGISTER_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILURE, LOGOUT, ADD_TO_FAVORITES_SUCCESS, RESET_PASSWORD_REQUEST, REQUEST_RESET_PASSWORD_REQUEST, REQUEST_RESET_PASSWORD_SUCCESS, REQUEST_RESET_PASSWORD_FAILURE } from \"./ActionType\";\nconst initialState = {\n  user: null,\n  isLoading: false,\n  error: null,\n  jwt: null,\n  favorites: [],\n  success: null\n};\nconst authReducer = (state = initialState, action) => {\n  var _action$payload;\n  switch (action.type) {\n    case REGISTER_REQUEST:\n    case LOGIN_REQUEST:\n    case GET_USER_REQUEST:\n    case RESET_PASSWORD_REQUEST:\n    case REQUEST_RESET_PASSWORD_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n        error: null,\n        success: null\n      };\n    case REGISTER_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        jwt: action.payload,\n        success: \"Register Success\"\n      };\n    case ADD_TO_FAVORITES_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        error: null,\n        // favorites:[action.payload,...state.favorites],\n        favorites: isPresentInFavorites(state.favorites, action.payload) ? state.favorites.filter(item => item.id !== action.payload.id) : [action.payload, ...state.favorites]\n      };\n    case LOGIN_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        jwt: action.payload,\n        success: \"Login success\"\n      };\n    case GET_USER_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        user: action.payload,\n        favorites: action.payload.favorites\n      };\n    case REQUEST_RESET_PASSWORD_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        success: (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message\n      };\n    case REGISTER_FAILURE:\n    case LOGIN_FAILURE:\n    case GET_USER_FAILURE:\n    case REQUEST_RESET_PASSWORD_FAILURE:\n      return {\n        ...state,\n        isLoading: false,\n        error: action.payload\n      };\n    case LOGOUT:\n      localStorage.removeItem(\"jwt\");\n      return {\n        ...state,\n        jwt: null,\n        user: null,\n        success: \"logout success\"\n      };\n    default:\n      return state;\n  }\n};\nexport default authReducer;","map":{"version":3,"names":["isPresentInFavorites","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILURE","LOGOUT","ADD_TO_FAVORITES_SUCCESS","RESET_PASSWORD_REQUEST","REQUEST_RESET_PASSWORD_REQUEST","REQUEST_RESET_PASSWORD_SUCCESS","REQUEST_RESET_PASSWORD_FAILURE","initialState","user","isLoading","error","jwt","favorites","success","authReducer","state","action","_action$payload","type","payload","filter","item","id","message","localStorage","removeItem"],"sources":["D:/public/Downloads/food-ordering-project-2024-02-07-03-39-35/Source/frontend-react/src/State/Authentication/Reducer.js"],"sourcesContent":["import { isPresentInFavorites } from \"../../config/logic\";\r\nimport {\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAILURE,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  GET_USER_FAILURE,\r\n  LOGOUT,\r\n  ADD_TO_FAVORITES_SUCCESS,\r\n  RESET_PASSWORD_REQUEST,\r\n  REQUEST_RESET_PASSWORD_REQUEST,\r\n  REQUEST_RESET_PASSWORD_SUCCESS,\r\n  REQUEST_RESET_PASSWORD_FAILURE,\r\n} from \"./ActionType\";\r\n\r\nconst initialState = {\r\n  user: null,\r\n  isLoading: false,\r\n  error: null,\r\n  jwt: null,\r\n  favorites: [],\r\n  success: null,\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case REGISTER_REQUEST:\r\n    case LOGIN_REQUEST:\r\n    case GET_USER_REQUEST:\r\n    case RESET_PASSWORD_REQUEST:\r\n    case REQUEST_RESET_PASSWORD_REQUEST:\r\n      return { ...state, isLoading: true, error: null, success: null };\r\n\r\n    case REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        jwt: action.payload,\r\n        success: \"Register Success\",\r\n      };\r\n\r\n    case ADD_TO_FAVORITES_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: null,\r\n        // favorites:[action.payload,...state.favorites],\r\n        favorites: isPresentInFavorites(state.favorites, action.payload)\r\n          ? state.favorites.filter((item) => item.id !== action.payload.id)\r\n          : [action.payload, ...state.favorites],\r\n      };\r\n\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        jwt: action.payload,\r\n        success: \"Login success\",\r\n      };\r\n\r\n    case GET_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        user: action.payload,\r\n        favorites: action.payload.favorites,\r\n      };\r\n      \r\n    case REQUEST_RESET_PASSWORD_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        success: action.payload?.message,\r\n      };\r\n\r\n    case REGISTER_FAILURE:\r\n    case LOGIN_FAILURE:\r\n    case GET_USER_FAILURE:\r\n    case REQUEST_RESET_PASSWORD_FAILURE:\r\n      return { ...state, isLoading: false, error: action.payload };\r\n\r\n    case LOGOUT:\r\n      localStorage.removeItem(\"jwt\");\r\n      return { ...state, jwt: null, user: null, success: \"logout success\" };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default authReducer;\r\n"],"mappings":"AAAA,SAASA,oBAAoB,QAAQ,oBAAoB;AACzD,SACEC,gBAAgB,EAChBC,gBAAgB,EAChBC,gBAAgB,EAChBC,aAAa,EACbC,aAAa,EACbC,aAAa,EACbC,gBAAgB,EAChBC,gBAAgB,EAChBC,gBAAgB,EAChBC,MAAM,EACNC,wBAAwB,EACxBC,sBAAsB,EACtBC,8BAA8B,EAC9BC,8BAA8B,EAC9BC,8BAA8B,QACzB,cAAc;AAErB,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE,IAAI;EACVC,SAAS,EAAE,KAAK;EAChBC,KAAK,EAAE,IAAI;EACXC,GAAG,EAAE,IAAI;EACTC,SAAS,EAAE,EAAE;EACbC,OAAO,EAAE;AACX,CAAC;AAED,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAGR,YAAY,EAAES,MAAM,KAAK;EAAA,IAAAC,eAAA;EACpD,QAAQD,MAAM,CAACE,IAAI;IACjB,KAAK1B,gBAAgB;IACrB,KAAKG,aAAa;IAClB,KAAKG,gBAAgB;IACrB,KAAKK,sBAAsB;IAC3B,KAAKC,8BAA8B;MACjC,OAAO;QAAE,GAAGW,KAAK;QAAEN,SAAS,EAAE,IAAI;QAAEC,KAAK,EAAE,IAAI;QAAEG,OAAO,EAAE;MAAK,CAAC;IAElE,KAAKpB,gBAAgB;MACnB,OAAO;QACL,GAAGsB,KAAK;QACRN,SAAS,EAAE,KAAK;QAChBE,GAAG,EAAEK,MAAM,CAACG,OAAO;QACnBN,OAAO,EAAE;MACX,CAAC;IAEH,KAAKX,wBAAwB;MAC3B,OAAO;QACL,GAAGa,KAAK;QACRN,SAAS,EAAE,KAAK;QAChBC,KAAK,EAAE,IAAI;QACX;QACAE,SAAS,EAAErB,oBAAoB,CAACwB,KAAK,CAACH,SAAS,EAAEI,MAAM,CAACG,OAAO,CAAC,GAC5DJ,KAAK,CAACH,SAAS,CAACQ,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACG,OAAO,CAACG,EAAE,CAAC,GAC/D,CAACN,MAAM,CAACG,OAAO,EAAE,GAAGJ,KAAK,CAACH,SAAS;MACzC,CAAC;IAEH,KAAKhB,aAAa;MAChB,OAAO;QACL,GAAGmB,KAAK;QACRN,SAAS,EAAE,KAAK;QAChBE,GAAG,EAAEK,MAAM,CAACG,OAAO;QACnBN,OAAO,EAAE;MACX,CAAC;IAEH,KAAKd,gBAAgB;MACnB,OAAO;QACL,GAAGgB,KAAK;QACRN,SAAS,EAAE,KAAK;QAChBD,IAAI,EAAEQ,MAAM,CAACG,OAAO;QACpBP,SAAS,EAAEI,MAAM,CAACG,OAAO,CAACP;MAC5B,CAAC;IAEH,KAAKP,8BAA8B;MACjC,OAAO;QACL,GAAGU,KAAK;QACRN,SAAS,EAAE,KAAK;QAChBI,OAAO,GAAAI,eAAA,GAAED,MAAM,CAACG,OAAO,cAAAF,eAAA,uBAAdA,eAAA,CAAgBM;MAC3B,CAAC;IAEH,KAAK7B,gBAAgB;IACrB,KAAKG,aAAa;IAClB,KAAKG,gBAAgB;IACrB,KAAKM,8BAA8B;MACjC,OAAO;QAAE,GAAGS,KAAK;QAAEN,SAAS,EAAE,KAAK;QAAEC,KAAK,EAAEM,MAAM,CAACG;MAAQ,CAAC;IAE9D,KAAKlB,MAAM;MACTuB,YAAY,CAACC,UAAU,CAAC,KAAK,CAAC;MAC9B,OAAO;QAAE,GAAGV,KAAK;QAAEJ,GAAG,EAAE,IAAI;QAAEH,IAAI,EAAE,IAAI;QAAEK,OAAO,EAAE;MAAiB,CAAC;IACvE;MACE,OAAOE,KAAK;EAChB;AACF,CAAC;AAED,eAAeD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}